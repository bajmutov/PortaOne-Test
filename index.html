<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./styles.css" />
    <title>Education Center Portaone</title>
  </head>

  <body>
    <h1 class="title">Education Center PortaOne Test</h1>
    <p>Choose the file with numbers, please...</p>
    <input type="file" id="test" />
    <ul class="list"></ul>

    <script>
      const list = document.querySelector(".list");

      document.getElementById("test").addEventListener("change", function (e) {
        let file = this.files[0];
        fileReader = new FileReader();
        if (file) {
          fileReader.addEventListener("loadend", function (e) {
            let match = e.target.result.match(/-?[0-9]*\d+(\d+)?/g);
            result = [];
            match.forEach((e) => {
              result.push(+e);
            });
            console.log("array", result);

            //  1. максимальне число в файлі
            function maxNumber(array) {
              let max = array[0];
              for (i = 1; i < array.length; i += 1) {
                if (array[i] > max) max = array[i];
              }
              console.log("max", max);
              list.insertAdjacentHTML(
                "beforeend",
                `<li class="list-item new">Max number : ${max}</li>`
              );
            }
            maxNumber(result);

            //  2. мінімальне число в файлі
            function minNumber(array) {
              let min = array[0];
              for (i = 1; i < array.length; i += 1) {
                if (array[i] < min) min = array[i];
              }
              console.log("min", min);
              list.insertAdjacentHTML(
                "beforeend",
                `<li class="list-item new">Min number: ${min}</li>`
              );
            }
            minNumber(result);

            //  3. медіанa
            function medianNumber(array) {
              array.sort();
              const middle = Math.floor(array.length / 2);
              if (array.length % 2 === 0) {
                const mediana = (array[middle - 1] + array[middle]) / 2;
                console.log("mediana", mediana);
              } else {
                const mediana = array[middle];
                console.log("mediana", mediana);
                list.insertAdjacentHTML(
                  "beforeend",
                  `<li class="list-item new">Mediana: ${mediana}</li>`
                );
              }
            }
            medianNumber(result);

            //  4. середнє арифметичне значення
            function averageNumber(array) {
              let sum = 0;
              for (i = 0; i < array.length; i += 1) {
                sum += array[i];
              }
              const average = sum / array.length;
              console.log("average", average);
              list.insertAdjacentHTML(
                "beforeend",
                `<li class="list-item new">Average: ${average}</li>`
              );
            }
            averageNumber(result);
          });
          fileReader.readAsText(file);
        }
      });
    </script>
  </body>
</html>
